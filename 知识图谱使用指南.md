# 知识图谱使用指南

## 完成情况

✅ 已成功为你的 MkDocs 网站添加了知识图谱功能！

## 生成的文件

### 1. 配置文件
- `mkdocs.yml` - 已更新，添加了 D3.js 和图谱相关的资源

### 2. 样式和脚本文件
- `docs/css/graph.css` - 图谱的样式定义
- `docs/js/graph.js` - 图谱的交互逻辑和可视化代码

### 3. 图谱页面
- `docs/graph.zh.md` - 中文知识图谱页面
- `docs/graph.en.md` - 英文知识图谱页面

### 4. 数据文件
- `docs/js/graph-data.json` - 自动生成的图谱数据（116个节点，90个中文，26个英文）

### 5. 数据生成脚本
- `generate_graph_data.py` - Python脚本，用于自动分析文档结构

## 功能特性

### 🌐 中英文分离显示
- 支持按语言筛选显示内容
- 中文内容用蓝色圆圈表示
- 英文内容用粉色圆圈表示

### 🔍 搜索功能
- 实时搜索节点标题和ID
- 匹配的节点会高亮显示（橙色）
- 自动显示相关联的节点

### 🎮 交互操作
- **拖拽节点**：重新排列图谱布局
- **缩放平移**：鼠标滚轮缩放，拖拽平移视图
- **点击节点**：跳转到对应页面（在新窗口打开）
- **悬停提示**：显示页面详细信息

### ⌨️ 快捷键
- `Ctrl/Cmd + 0` - 重置缩放
- `Ctrl/Cmd + 9` - 适应画布大小

## 使用方法

### 1. 构建网站
```bash
# 重新生成图谱数据（可选）
python3 generate_graph_data.py

# 构建 MkDocs 网站
mkdocs build

# 本地预览
mkdocs serve
```

### 2. 访问图谱
访问以下URL查看知识图谱：
- 中文版：`/graph.zh/`
- 英文版：`/graph.en/`

### 3. 更新图谱数据
当你添加新的文档或修改现有文档后，运行：
```bash
python3 generate_graph_data.py --verbose
```

## 自定义配置

### 修改图谱外观
编辑 `docs/css/graph.css` 来自定义：
- 节点颜色和大小
- 链接样式
- 控制按钮样式
- 响应式布局

### 调整图谱行为
编辑 `docs/js/graph.js` 来修改：
- 力导向布局参数
- 节点交互行为
- 搜索算法
- 语言切换逻辑

### 数据生成规则
编辑 `generate_graph_data.py` 来调整：
- 文件包含/排除规则
- 语言检测逻辑
- 节点分类规则
- 链接提取规则

## 故障排除

### 如果图谱不显示
1. 检查浏览器控制台是否有JavaScript错误
2. 确认 `docs/js/graph-data.json` 文件存在且有效
3. 验证 D3.js 库是否正确加载

### 如果节点无法点击跳转
1. 检查节点的 `path` 属性是否正确
2. 确认目标页面确实存在
3. 验证URL构建逻辑是否正确

### 重新生成数据
如果遇到问题，可以重新生成图谱数据：
```bash
rm docs/js/graph-data.json
python3 generate_graph_data.py --verbose
```

## 扩展功能

### 添加更多链接类型
可以在 `extract_links()` 方法中添加更多链接模式：
- Wiki-style 链接
- 标签引用
- 分类关联

### 添加节点属性
可以在生成数据时添加更多节点属性：
- 创建/修改时间
- 作者信息
- 文档类型标签

### 集成到导航
可以在 `mkdocs.yml` 的 `nav` 配置中添加图谱链接：
```yaml
nav:
  - 首页: index.md
  - 知识图谱: graph.zh.md
  - ...
```

## 技术细节

### 依赖
- **D3.js v7** - 数据可视化库
- **MkDocs Material** - 主题支持
- **Python 3** - 数据生成脚本

### 数据结构
```json
{
  "nodes": [
    {
      "id": "unique-id",
      "title": "页面标题", 
      "language": "zh|en",
      "category": "main|category|page",
      "path": "相对路径"
    }
  ],
  "links": [
    {
      "source": "source-id",
      "target": "target-id", 
      "type": "link-type"
    }
  ]
}
```

现在你的MkDocs网站已经具备了强大的知识图谱功能，可以帮助访问者更好地理解和导航你的内容结构！